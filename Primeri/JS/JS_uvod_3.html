<!DOCTYPE html>

<html>
    <head>
        <meta charset='utf-8'>
        <title>Uvod u JS</title>
    </head>
    <body>
        <h1>Uvod u JavaScript</h1>
        <p> Na ovoj stranici bice predstavljeni osnovni elementi JS koda.
            Najveci deo zabave odvija se unutar konzole, koju dobijate otvaranjem 
            konzole uz pomoc <mark>F12</mark>.</p>
        <ul>
            Ovaj fajl pokriva naredne elemente jezika:
            <li>Funkcije</li>
            <li>Pisanje funkcija</li>
            <li>Anonimne funkcije</li>
            <li>Rekurzivne funkcije</li>
            <li>Periodicno izvrsavanje funkcija</li>
            <li>Math objekat</li>
            <li>Opseg vazenja promenljivih</li>
        </ul>
        <h1>Periodicno izvrsavanje funkcija</h1>
        <p> Danas radimo funkcije setTimeout() i setInterval().</p>
        <dl>
            <dt>
                setTimeout()
            </dt>
            <dd>
                <ul>
                    <li>izvršava zadate naredbe nakon vremenskog intervala zadatog u milisekundama.</li>
                    <li> može se iskoristiti i za periodično izvršavanje funkcija tako što će kao poslednja naredba funkcije
                        navesti poziv funkcije setTimeout() čiji je prvi argument upravo funkcija iz koje je pozvan setTimeout().</li>
                </ul> 
            </dd>
            <dt>
                setInterval()
            </dt>
            <dd>
                vrši periodično izvršavanje koda. Redosled argumenata ove
                funkcije je isti kao i kod funkcije setTimeout().
            </dd>
        </dl>    
        <script>
            console.log("_________________________________________");
            console.log("RAD SA FUNKCIJAMA");
            console.log("_________________________________________");
            //funkcije sa 2 argumenta
            function sabiranje1(a,b){
                var zbir = a + b;
                return zbir; //povratna vrednost funkcije smestena u promenljivu zbir
            }


            function sabiranje2(a,b){
                return a+b; //odmah vracamo zbir
            }

            //funkcije bez argumenata
            function pozdrav(){
                console.log("Hello World!");
                return;
            }


            function dodatak(){
                var broj = Math.random()*100;
                return broj;
            }

            var a = 5;
            var b = 7;
            //nece se nista ispisati funkcija ce se samo izvrsiti i vratiti rezultat ovde
            sabiranje1(a, b); 
            //povratnu vrednost funkcije mozemo smestiti unutar neke promenljive 
            var c = sabiranje2(a,b);
            console.log(c);
            //funkciju mozemo pozvati i unutar neke druge funkcije
            console.log("Rezultat sabiranja ", a, "i", b,"je", sabiranje1(a,b));
            pozdrav(); //funkcija ce se izvrsiti i ispisati "Hello world u konzoli"
            console.log(dodatak()); 

            //Dodela funkcije promenljivoj 
            console.log("_________________________________________");
            console.log("DODELA FUNKCIJE PROMENLJIVOJ");
            console.log("_________________________________________");
            var stepenovanje = function(osnova, eksponent){
                var rez = 1;
                for(i = 0; i < eksponent; i++){
                    rez *= osnova;
                }
                return rez;
            };
            console.log(stepenovanje(2,3));
            //Anonimne funkcije
            //stepenovanje je takodje primer anonimne funkcije!
            console.log("_________________________________________");
            console.log("ANONIMNE FUNKCIJE");
            console.log("_________________________________________");
            var anonimna = function(){
                console.log("Dosli ste do anonimne funkcije.");
                return;
            };
            anonimna();
            /*
            function(){
                console.log("Nece proci");
            };*/

            
            //Periodicno izvrsavanje funkcija
            console.log("_________________________________________");
            console.log("PERIODICNO IZVRSAVANJE FUNKCIJA");
            console.log("_________________________________________");
            //Koristimo funkcije setTimeout() i setInterval
            function objava(){
                alert("Obavesteni ste!");
            }
            setTimeout(objava,4000);
            //anonimna fija je prvi argument
            setTimeout(function(){
                alert("Obavesteni ste iz anonimne funkcije!");
            },5000);

            //Funkciju setTimeout mozemo koristiti i za periodicno izvrsavanje
            function objava2(){
                alert("Obavestenje u intervalu!");
                //setTimeout(objava2,1000); // skinuti komentar ispred set
            }
            objava2();

            //clearTimeout
            var tajmer = setTimeout(function(){
                alert("Ovaj tekst se nece ispisati");
            }, 2000);
            clearTimeout(tajmer);

            //setInterval
            /*setInterval(function(){
                alert("Ova funkcija ce se izrsavati svake sekunde.")
            }, 1000); */

            //clearInterval()
            var tajmer = setInterval(function(){
                alert("Ovo ce se izvrsiti samo jednom");
            },1000);
            //Nakon 1.5 sekunde ce se pozvati prekidanje setInterval()
            setTimeout(function(){
                clearInterval(tajmer);
            },1500);


            //Objekat Math
            console.log("_________________________________________");
            console.log("OBJEKAT MATH");
            console.log("_________________________________________");
            var a = 9;
            var b = 3;
            console.log("Koren ",a,"je", Math.sqrt(a));
            console.log(a,"na",b,'je',Math.pow(a,b));
            console.log("Minimum brojeva",a,",",b,", 120 i 2 je",Math.min(a,b,120,2));
            console.log("Maksimum brojeva",a,",",b,", 120 i 2 je",Math.min(a,b,120,2));
            console.log("Broj ",a,"puta konstanta pi je", a*Math.PI,"\nKada se dobijeni broj podeli sa 14 i zaokruzi dobija se:",Math.round((Math.PI * a)/14));

            //Broj argumenata funkcije
            console.log("_________________________________________");
            console.log("BROJ ARGUMENATA FUNKCIJE");
            console.log("_________________________________________");
            var a = 5;
            var b = 7;
            //funkcija vraca ispravan rezultat
            //ignorise visak argumenata
            console.log(sabiranje2(a,b,4,2,1));

            function argumenti(prvi, drugi){
                console.log(prvi);
                console.log(drugi);
                return;
            }
            argumenti("Prvi","Drugi"); //prvi drugi
            argumenti("Prvi"); //prvi undefined
            argumenti(); //undefined undefined
            argumenti("Prvi","Drugi","Treci"); //prvi drugi


            function prosek(){
                var suma = 0;
                console.log("Broj argumenataje:",arguments.length);
                for(i=0;i<arguments.length;i++){
                    suma += arguments[i];
                    console.log(arguments[i]);
                }
                var prosek = suma / arguments.length;
                console.log(suma);
                console.log(prosek);
                return prosek;
            }
            var p = prosek(9,10,10,6,8);
            console.log("Prosek ocena je:",p);
            //Funkcije sa promenljivim brojem parametara
             function lista_za_kupovinu(...parametri){
                //for of petlja za kretanje kroz listu parametara
                  for(parametar of parametri){
                    //uradi nesto sa parametrima
                    console.log(parametar);    
                } 
             }
             console.log("Lista za kupovinu");
             lista_za_kupovinu("mleko","hleb","lazanje","torta");


           //for in vs for of
            console.log("_________________________________________");
            console.log("FOR IN i FOR OF");
            console.log("_________________________________________");
            var ucenik = { ime : "Ana",
                           indeks: "1083/2016",
                           prosek: 9.41};
            for(kljuc in ucenik){
                console.log(`${kljuc} --> ${ucenik[kljuc]}`);
            }  

            var str = "Neki tekst";
            for(indeks in str){
                console.log(`Indeks ${str[indeks]}:${indeks}`);
            }
           //Doseg vazenja promenljivih  
            console.log("_________________________________________");
            console.log("DOSEG VAZENJA PROMENLJIVIH");
            console.log("_________________________________________");
            function vidljivost(x){
                console.log(x);
                var x = 5;
                console.log(x);
                if(x == 5){
                    //promenljive mozemo kreirati koristeci let
                    //let promenljive imaju lokalni doseg
                    let n = 7;
                    console.log("n iz if-a:",n);
                }
                else{
                    //console.log("n iz else-a:",n);   
                }
                return x;
            }
            function zbir(){
                return c+d;
            }
            function vidljivost_let(){
                let x = 5;
                if(true){
                    let x = 7;
                    console.log(x); //7
                } 
                console.log(x); //5
            }

            var x = 10;
            vidljivost(x);
            console.log(x);
            
            var c = 7; //zakomentarisati
            var d = 8; //zakomentarisati
            console.log(zbir());
            var a = 5;
            var b = 7;
            console.log(zbir(a,b));
            vidljivost_let();
            //hoisting, vidljivost funkcija
            console.log("_________________________________________");
            console.log("VIDLJIVOST FUNKCIJA");
            console.log("_________________________________________");
            
//            ispisi(s); //s is not declared
            ispisi(parametar); //undefined
            var parametar;
            function ispisi(p){
                console.log("Vrednost parametra je:",p);
                return;
            }
            parametar = 10; 
            ispisi(parametar);

            function globalna(){
                console.log("Ova funkcija je vidljiva i moze se pozvati na nivou celog programa.");
            }

            function globalna_2(){
                lokalna(1); //poziv pre definicije
                function lokalna(n){
                    console.log("Poziv",n, "iz lokalne:");
                    globalna();
                }
                function lokalna2(){
                    console.log("Poziv iz druge lokalne:");
                    lokalna(2);
                }
                lokalna(3); //poziv nakon definicije   
            }

            globalna();
            globalna_2();
//            lokalna(4);
  //          lokalna2();

            console.log("_________________________________________");
            console.log("REKURZIVNE FUNKCIJE");
            console.log("_________________________________________");
            function fib(n){
                if(n == 0 || n == 1){
                    return 1;   
                }
                return fib(n-1) + fib(n-2);
            }

            var a = 5;
            console.log("a-ti Fibonačijev broj", fib(a));
        </script>

    </body>
</html>